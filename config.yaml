# ============================================================
# QUANT VALIDATION PIPELINE - Konfigurationsdatei
# ============================================================

project:
  name: "quant_validation_pipeline"
  version: "1.0.0"
  broker: "IC Markets"
  base_currency: "USD"
  description: "Validation pipeline für Forex/Crypto/Equities Trading Strategien"

# ============================================================
# DATEN-QUELLEN
# ============================================================

data:
  # Welche Symbole willst du tracken?
  symbols:
  - "EURUSD"
  - "XAUUSD"
  - "BTCUSD"
  - "GBPUSD"
  - "USDJPY"

  # Timeframes (M1=1min, M5=5min, H1=1hour, D1=daily, etc.)
  timeframes: ["M5", "M15", "H1", "D1"]

  # Datenquelle: "mt5" oder "yfinance"
  source: "mt5"

  # MT5 Konfiguration
  mt5:
  server: "ICMarkets-Live" # oder dein IC-Markets Server
  timezone: "UTC"
  history_folder: "data/raw"

  # Speicher-Konfiguration (DuckDB + Parquet)
  storage:
  type: "duckdb"
  duckdb_path: "storage/market_data.duckdb"
  parquet_path: "storage/parquet/"

# ============================================================
# BACKTEST PARAMETER
# ============================================================

backtest:
  initial_capital: 100_000 # USD
  max_position_size: 0.01 # 1% pro Trade
  # Gebühren & Slippage (realistisch!)
  costs:
  spread_pips: 1.5 # IC Markets typisch
  commission: 0.0001 # 0.01% pro Seite
  slippage_percent: 0.0003 # 0.03%

# ============================================================
# VALIDIERUNGS-SCHWELLEN (Decision Gates)
# ============================================================

validation:
  min_oos_sharpe: 1.8
  max_oos_drawdown: 0.12
  min_mc_positive_prob: 0.95
  min_mc_p95_return: 0.20
  max_cvar5: -0.15
  min_kelly_oos_full: 0.15
  min_multi_asset_hit_rate: 0.75
  min_mt5_correlation: 0.90

  # Walk-Forward Test Parameter
  walk_forward:
    train_window: 252   # ~1 Jahr tägliche Daten
    test_window: 63     # ~3 Monate
    step_size: 21       # ~1 Monat Schritt


# ============================================================
# STOCHASTISCHE SZENARIEN (GBM / Heston / Jump-Diffusion)
# ============================================================

simulation:
  # Zeithorizont eines Szenarios (in Jahren)
  T_years: 1.0           # 1 Jahr
  num_steps: 252         # 252 Handelstage
  num_paths: 5000        # Anzahl Simulationen
  random_state: 12345

  heston:
    kappa: 2.0
    theta: 0.04
    sigma: 0.3
    rho: -0.7
    v0: 0.04
    r: 0.0               # risikofreier Zins, hier vernachlässigt

  jumpdiffusion:
    lambda_jump: 0.1     # erwartete Anzahl Jumps pro Jahr
    mu_jump: -0.05       # durchschnittlicher Jump (log-Return)
    sigma_jump: 0.1      # Volatilität der Jumps

# ============================================================
# HMM-REGIME-MODELL
# ============================================================

hmmregime:
  enabled: true
  nstates: 3          # z.B. 0=Bull, 1=Bear, 2=Neutral
  niter: 1000
  use_price_returns: false   # aktuell nutzen wir Equity-Returns


# ============================================================
# LOGGING
# ============================================================

logging:
  level: "INFO" # DEBUG, INFO, WARNING, ERROR, CRITICAL
  console: true
  file:
  enabled: true
  path: "logs/pipeline.log"
  max_size_mb: 100

# ============================================================
# MODELL-ANNAHMEN (laden von YAML-Dateien)
# ============================================================

models:
  assumptions_folder: "models/assumptions/"
  regime_policy_file: "validation/regime_policy.yaml"

